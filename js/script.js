let quotes = ["Fools ignore complexity. Pragmatists suffer it. Some can avoid it. Geniuses remove it.", 
"Dealing with failure is easy: Work hard to improve. Success is also easy to handle: You've solved the wrong problem. Work hard to improve.",
"You think you know when you learn, are more sure when you can write, even more when you can teach, but certain when you can program.",
"Computer science education cannot make anybody an expert programmer any more than studying brushes and pigment can make somebody an expert painter.",
"Students should be evaluated on how well they can achieve the goals they strived to achieve within a realistic context. Students need to learn to do things, not know things.", 
"Talk is cheap. Show me the code. -Linus",
"Programs must be written for people to read, and only incidentally for machines to execute.",
"Always code as if the guy who ends up maintaining your code will be a violent psychopath who knows where you live",
"Any fool can write code that a computer can understand. Good programmers write code that humans can understand. - Martin Fowler",
"The best programs are written so that computing machines can perform them quickly and so that human beings can understand them clearly. A programmer is ideally an essayist who works with traditional aesthetic and literary forms as well as mathematical concepts, to communicate the way that an algorithm works and to convince a reader that the results will be correct.",
"I'm not a great programmer; I'm just a good programmer with great habits. - Kent Beck",
"Truth can only be found in one place: the code. - Robert C.Martin",
"The most important property of a program is whether it accomplishes the intention of its user.",
"Remember that code is really the language in which we ultimately express the requirements. We may create languages that are closer to the requirements. We may create tools that help us parse and assemble those requirements into formal structures. But we will never eliminate necessary precision—so there will always be code.",
"Some of the best programming is done on paper, really. Putting it into the computer is just a minor detail.",
"Don't gloss over a routine or piece of code involved in the bug because you 'know' it works. Prove it. Prove it in this context, with this data, with these boundary conditions.",
"The issue of finding the best possible answer or achieving maximum efficiency usually arises in industry only after serious performance or legal troubles.",
"i am committed to push my branch to the master",
"Take time to learn the closest thing that we have to a SUPERPOWER - Code",
"Web development is difficult, only then it is fun to do. You just have to set your standards. If it were to be easy, would anyone do it?",
"Code is there to explain the comments to the computer.",
"Programming is learned by writing programs.",
"No matter which field of work you want to go in, it is of great importance to learn at least one programming language.",
"If you optimize everything, you will always be unhappy.",
"Coding is not just code, that is a live thing to serve everyone!",
"There are many terrible mistakes to make in program design, and you should go ahead and make them so that you understand them. A sense of what a good program looks like is developed in practice, not learned from a list of rules.",
"Tests shouldn't verify units of code. Instead they should verify units of behavior: something that is meaningful for the problem domain and ideally something that a business person can recognize as useful. The number of classes it takes to implement such a unit of behavior is irrelevant. The unit could span across multiple classes or only one class, or even take up just a tiny method. [...] A test should tell a story about the problem your code helps to share, and this story should be cohesive and meaningful to a non-programmer.",
"Theory is when you know something, but it doesn't work. Practice is when something works, but you don't know why. Programmers combine theory and practice: Nothing works and they don't know why.",
"It's not a bug; it's an undocumented feature.",
"We must all suffer from one of two pains: the pain of discipline or the pain of regret. The difference is discipline weighs ounces while regret weighs tons",
"Code is read more than it is written.",
"For years, coders have been programming computers so that they perform repetitive tasks for us. Now they automate our repetitive thoughts.",
"Everybody in this country should learn to program a computer, because it teaches you how to think",
"The only way to go fast, is to go well.",
"I'm a programmer. I like programming. And the best way I've found to have a positive impact on code is to write it.",
"We don't have to be smarter than the rest. We have to be more disciplined than the rest.",
"Happiness should be a function without any parameters.",
"User interface is the process of shifting from chaotic complexity to elegant simplicity.",
"Everyday life is like programming, I guess. If you love something you can put beauty into it.",
"Inheritance has recently fallen out of favor as a programming design solution in many programming languages because it's often at risk of sharing more code than necessary. Subclasses shouldn't always share all characteristics of their parent class but will do so with inheritance. This can make a program's design less flexible. It also introduces the possibility of calling methods on subclasses that don't make sense or that cause errors because the methods don't apply to the subclass. In addition, some languages will only allow a subclass to inherit from one class, further restricting the flexibility of a program’s design. For these reasons, Rust takes a different approach, using trait objects instead of inheritance.",
"The realization came over me with full force that a good part of the remainder of my life was going to be spent in finding errors in my own programs.",
"If you have to spend effort looking at a fragment of code and figuring out what it's doing, then you should extract it into a function and name the function after the 'what'.",
"When it comes to writing code, the number one most important skill is how to keep a tangle of features from collapsing under the weight of its own complexity.",
"Delivering good software today is often better than perfect software tomorrow, so finish things and ship.",
"End-to-End encryption is practically a meaningless phrase used by internet-based companies to coax people into believing the modern myth of online privacy.",
"Health and programming should go together like a horse and carriage. You can't have one without the other. In our sedentary office work, we often forget that an absence of health is as bad as a lack of programming skills.",
"Along every step of our journey through life, our mind is being programmed. If we are not programming it ourselves, someone else is doing it to us.",
"Programming isn't about what you know; it's about what you can figure out.",
"Think twice, code once.",
"Not all roots are buried down in the ground, some are at the top of a tree.",
"Programming is not easy like Sunday morning, it is silent poetry.",
"A code is like love, it has created with clear intentions at the beginning, but it can get complicated.",
"we are writing our own ‪karma! I mean my test cases.",
"Programming, it turns out, is hard. The fundamental rules are typically simple and clear. But programs built on top of these rules tend to become complex enough to introduce their own rules and complexity. You’re building your own maze, in a way, and you might just get lost in it.",
"Software testing is a sport like hunting, it's bughunting.",
"Programming is breaking of one big impossible task into several very small possible tasks.",
"Learning the art of programming, like most other disciplines, consists of first learning the rules and then learning when to break them.",
"Premature optimization is the root of all evil.",
"Programming your mind with positive thoughts each day will go a long way to keep you from allowing external criticism to derail your dreams.",
"Every programmer is an author. Programming is a creative endeavor.",
"Tests are stories we tell the next generation of programmers on a project.",
"So if you want to go fast, if you want to get done quickly, if you want your code to be easy to write, make it easy to read.",
"You Can't Write Perfect Software. Did that hurt? It shouldn't. Accept it as an axiom of life. Embrace it. Celebrate it. Because perfect software doesn't exist. No one in the brief history of computing has ever written a piece of perfect software. It's unlikely that you'll be the first. And unless you accept this as a fact, you'll end up wasting time and energy chasing an impossible dream.",
"Generally, the craft of programming is the factoring of a set of requirements into a a set of functions and data structures.",
"Programming is the act of installing internal, pre-established reactions to external stimuli so that a person will automatically react in a predetermined manner to things like an auditory, visual or tactile signal or perform a specific set of actions according to a date and/or time.",
"Trying to improve software quality by increasing the amount of testing is like trying to lose weight by weighing yourself more often. What you eat before you step onto the scale determines how much you will weigh, and the software-development techniques you use determine how many errors testing will find.",
"There is nothing good or bad about knowledge itself; morality lies in the application of knowledge.",
"Think like a fundamentalist, code like a hacker.",
"Any application that can be written in JavaScript, will eventually be written in JavaScript.",
"If you're good at the debugger it means you spent a lot of time debugging. I don't want you to be good at the debugger.",
"Code without tests is bad code. It doesn't matter how well written it is; it doesn't matter how pretty or object-oriented or well-encapsulated it is. With tests, we can change the behavior of our code quickly and verifiably. Without them, we really don't know if our code is getting better or worse.",
"Programming is the art of doing one thing at a time",
"It is far easier to design a class to be thread-safe than to retrofit it for thread safety later.",
"Every mischance of life is an opportunity to behave well",
"Whenever more than one thread accesses a given state variable, and one of them might write to it, they all must coordinate their access to it using synchronization.",
"I've learned over the past few years that comments should be considered smells."];


let textContent = document.getElementById("text-content");

let typingContent = document.getElementById("typing-content");

let statusEle = document.getElementById("status-content");

let startBtn = document.getElementById("start-btn");
getRandomValue = function(maxValue)
{
    return Math.floor(Math.random() * maxValue);
}


let spannedWords = [];
let words = [];
let currentWord = 0;
let typingStartTime;
let selectedQuote;
startBtn.addEventListener("click", ()=> {
    currentWord = 0;
    let currentIndex = getRandomValue(quotes.length);
    selectedQuote =  quotes[currentIndex];
    typingContent.disabled = false;

    words = selectedQuote.split(" ");

    spannedWords  = words.map(word => `<span>${word} </span>`)
    textContent.innerHTML = spannedWords.join(' ');
    //console.log(spannedWords);
    textContent.childNodes[currentWord].className = 'highlight';
    typingContent.focus();
    typingStartTime = new Date();

    statusEle.innerHTML = '';

});

typingContent.addEventListener("input", () => {
    let typedWord = typingContent.value;
    if (currentWord == words.length - 1 && typedWord.trim() == words[currentWord])
    {
        let completedTime = new Date();
        typingContent.value = '';
        typingContent.disabled = true;
        //console.log(`Success!!! currentWord ${currentWord}: words length : ${words.length}`);
        let typedTimeInSeconds = (completedTime - typingStartTime) / 1000 ;
        let pwm = selectedQuote.length * 60 / (4.7 * typedTimeInSeconds);
        pwm = pwm.toFixed(2);
        statusEle.innerHTML = `Congratulations!!!! You took ${typedTimeInSeconds} seconds to complete. This is equivalent to WPM <span id="wpm"> ${pwm}</span>`;
        textContent.getElementsByTagName('span')[currentWord].className = '';
    }
    else if (typedWord.endsWith(' ') && typedWord.trim() == words[currentWord].trim())
    {
        textContent.getElementsByTagName('span')[currentWord].className = '';
        currentWord++;
        typingContent.value = '';
        if (currentWord < words.length)
        {
            textContent.getElementsByTagName('span')[currentWord].className = 'highlight';
        }
    }
    else if (words[currentWord].startsWith(typedWord))
    {
        typingContent.className = '';
    }
    else
    {
        typingContent.className = 'error';
    }
});
